= Build Profile methods

link:../README.adoc[Summary]

== ProfileBuilder

The ProfileBuilder class allows to create a Profile (composed of Voters and their Preference _(*)_ ). It is used in particular by the import methods.

image:../assets/profilebuilder_diag_class.PNG[Profile Builder - Class Diagram]



[cols="1,2", options="header"] 
|===
|Method name
|Contract


|castMapExtendsToRegularVoterPref(Map<Voter, ? extends OldCompletePreferenceImpl>)
|This static method has a Map as argument which contains a Voter and an extends of OldcompletePreferenceImpl. It checks if this map is not null and then it return a map which contains an OldcompletePreferenceImpl (that permit to cast a map with an OldLinearPreferenceImpl into a map with an OldcompletePreferenceImpl for example). 


|createProfileBuilder()
|This static factory method create a new ProfileBuilder with no arguments.


|createProfileBuilder(ProfileI)
|This static factory method accept a ProfileI as argument and checks if it is not null. If this profileI is null, it calls createProfileBuilder() else it returns a new ProfileBuilder with this profileI as argument.


|addVote(Voter, OldCompletePreferenceImpl)
|This method has a Voter and an OldCompletePreferenceImpl as arguments. It checks if these arguments are not null. This method put the preference for the voter in the map (attribute of the ProfileBuilder class).


|addVotes(OldCompletePreferenceIml, int)
|This method accept an OldCompletePreferenceImpl and a number of voters as arguments. Then it checks if these arguments are not null. Finally it put for each number of voters a preference in the map (attribute of the ProfileBuilder class).


|createProfile()
|This method return an ImmutableProfile from the "votes" (preference linked to the voter in a Map) in attribute of the ProfileBuilder, thanks to the createImmutableProfile() methode of ImmutableProfile class. We verify that the "votes" Map contains a complete profile, if it is not, it throws an exception. 


|createProfileI()
|This method return an ImmutableProfileI from the "votes" (preference linked to the voter in a Map) in attribute of the ProfileBuilder, thanks to the createImmutableProfile() methode of ImmutableProfileI class.


|createStrictProfile()
|This method return an ImmutableStrictProfile from the "votes" (preference linked to the voter in a Map) in attribute of the ProfileBuilder, thanks to the createImmutableStrictProfile() methode of ImmutableStrictProfile class. We verify that the "votes" Map contains a complete and strict profile, if it is not, it throws an exception.

|createStrictProfileI()
|This method return an ImmutableStrictProfile from the "votes" (preference linked to the voter in a Map) in attribute of the ProfileBuilder, thanks to the createImmutableStrictProfileI() methode of ImmutableStrictProfileI class. We verify that the "votes" Map contains a strict profile, if it is not, it throws an exception.

|===

== StrictProfileBuilder

image:../assets/strictprofilebuilder_diag_class.PNG[Strict Profile Builder - Class Diagram] 


The StrictProfilBuilder class *inherits from ProfilBuilder* class. The goal of this class is to build a StrictProfile. A StrictProfile is composed by preferences _(*)_ whose alternatives can not be equally ranked. It is used in particular by the import methods.


[cols="1,2", options="header"] 
|===
|Method name
|Contract


|createStrictProfileBuilder()
|This is a static factory method which returns a new StrictProfileBuilder without parameters.


|createStrictProfileBuilder(StrictProfileI prof)
|This is a static factory method which check if the argument prof is null or not. If prof is not null, it returns a new StrictProfileBuilder with the parameter prof. Else it calls createStrictProfileBuilder().


|addVote(Voter, OldCompletePreferenceImpl)
|This method takes an Voter and a an OldCompletePreferenceImpl as argument. It checks if this arguments are not null and if the preference is strict. Then it put this vote in the map (attribute of the ProfileBuilder class).


|createOneAlternativeProfile()
|This method has not argument and it create an ImmutableStrictProfileI from a StrictProfileI where only the first alternative of each preference is taken into account.


|===


_(*)_ NB : Currently, the StrictProfileBuilder class and ProfileBuilder class still uses the old Preference implementation (OldCompletePreferenceImpl) of the project. It should be changed to a CompletePreference.
